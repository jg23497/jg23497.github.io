"use strict";(self.webpackChunkjgulan=self.webpackChunkjgulan||[]).push([[500],{9525:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>h});var i=t(978),r=t(4848),o=t(8453);const s={title:"'Command not found' when running chruby",tags:["engineering"]},a=void 0,l={authorsImageUrls:[]},h=[{value:"What happened?",id:"what-happened",level:4},{value:"What next?",id:"what-next",level:4}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h4:"h4",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Following the Ruby community\u2019s advice to avoid using the system-installed Ruby instance for development, you\ninstall ",(0,r.jsx)(n.a,{href:"https://github.com/postmodern/chruby",children:"chruby"})," using the ",(0,r.jsx)(n.a,{href:"https://github.com/postmodern/chruby?tab=readme-ov-file#install",children:"official installation instructions"}),"\nand intend to configure your Ruby versions using ",(0,r.jsx)(n.a,{href:"https://github.com/postmodern/ruby-install",children:"ruby-install"}),". After\ninstalling chruby, you open a terminal and see the following error when running the command on your Unix-like OS\n(Ubuntu Linux or MacOS):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ chruby\nchruby: command not found\n"})}),"\n",(0,r.jsx)(n.h4,{id:"what-happened",children:"What happened?"}),"\n",(0,r.jsxs)(n.p,{children:["Let's take a closer look at what happened. The ",(0,r.jsx)(n.a,{href:"https://github.com/postmodern/chruby/blob/a543a35790e5528b5a67de20e78a7390f5f7606e/scripts/setup.sh#L65",children:"installation script"})," automatically adds a ",(0,r.jsx)(n.em,{children:"/etc/profile.d"})," script at\n",(0,r.jsx)(n.em,{children:"/etc/profile.d/chruby.sh"}),". The ",(0,r.jsx)(n.em,{children:"/etc/profile.d"})," scripts are themselves auto-discovered and then executed by the\n",(0,r.jsx)(n.em,{children:"/etc/profile"})," script, which one might expect to happen upon logging in:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="Extract from Ubuntu\'s /etc/profile file"',children:"if [ -d /etc/profile.d ]; then\n  for i in /etc/profile.d/*.sh; do\n    if [ -r $i ]; then\n      . $i\n    fi\n  done\n  unset i\nfi\n"})}),"\n",(0,r.jsxs)(n.p,{children:["However, ",(0,r.jsx)(n.em,{children:"/etc/profile"})," is invoked only for login shells. A login shell is what we use when logging in via SSH or via a TTY.\nOur terminal instance is an interactive non-login shell and so ",(0,r.jsx)(n.em,{children:"/etc/profile"})," is not executed, including our new ",(0,r.jsx)(n.em,{children:"chruby.sh"})," script that\nwould have made the chruby command available to our session."]}),"\n",(0,r.jsxs)(n.p,{children:["To make the chruby command available to an interactive shell, we must configure our shell accordingly. For Bash this involves editing the\n",(0,r.jsx)(n.em,{children:"~/.bashrc"})," or ",(0,r.jsx)(n.em,{children:"/etc/bash.bashrc"})," files, which are the current user and global configuration scripts for Bash respectively:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="~/.bashrc"',children:"source /usr/local/share/chruby/chruby.sh\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For ZSH on MacOS, the equivalent files would be ",(0,r.jsx)(n.em,{children:"~/.zshrc"})," and ",(0,r.jsx)(n.em,{children:"/etc/zshrc"}),". If using a shell other than Bash or ZSH, consult the documentation\nto ensure the correct configuration script is updated."]}),"\n",(0,r.jsx)(n.p,{children:"Correctly configured, we now see the following when running chruby:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ chruby\n   ruby-3.3.0\n"})}),"\n",(0,r.jsx)(n.h4,{id:"what-next",children:"What next?"}),"\n",(0,r.jsxs)(n.p,{children:["Although the convention for Unix-like application installers is ",(0,r.jsx)(n.em,{children:"not"})," to touch the user's data, the Google Cloud SDK installer asks users\nwhether it should update their ",(0,r.jsx)(n.em,{children:"~/.bashrc"})," file as part of the installation process:"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Modify profile to update your $PATH and enable bash completion? (Y/n)?"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The chruby installer could help users by offering to do the same, even if only handling the most popular shells like Bash or ZSH."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(6540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}},978:e=>{e.exports=JSON.parse('{"permalink":"/2024/02/27/chruby-error","source":"@site/blog/2024/02-27-chruby-error/index.mdx","title":"\'Command not found\' when running chruby","description":"Following the Ruby community\u2019s advice to avoid using the system-installed Ruby instance for development, you","date":"2024-02-27T00:00:00.000Z","tags":[{"inline":true,"label":"engineering","permalink":"/tags/engineering"}],"readingTime":1.77,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"\'Command not found\' when running chruby","tags":["engineering"]},"unlisted":false,"prevItem":{"title":"LLMs and an optimistic take on the future of software engineering","permalink":"/2025/04/19/llms-and-an-optimistic-take-on-the-future-of-software-engineering"},"nextItem":{"title":"Image noise reduction using DxO PhotoLab","permalink":"/2023/01/25/image-noise-reduction-using-dxo-photolab"}}')}}]);